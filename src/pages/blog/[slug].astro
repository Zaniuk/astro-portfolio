---
import MetaHead from "@components/general/MetaHead.astro";
import { info } from "@data";
import Layout from "@layouts/Layout.astro";
import PostLayout from "@layouts/PostLayout.astro";
import { Post } from "src/types/blog";
export async function getStaticPaths() {
  const bucketSlug = import.meta.env.PUBLIC_COSMIC_BUCKET_SLUG
  const readKey = import.meta.env.PUBLIC_COSMIC_READ_KEY
  const response = await fetch(
    `https://api.cosmicjs.com/v2/buckets/${bucketSlug}/objects?pretty=true&query=%7B%22type%22%3A%22posts%22%7D&read_key=${readKey}`
  );
  const objs = await response.json();
  const allPosts = objs.objects;
  return allPosts.map((post, i) => {
    return {
      params: { slug: post.slug },
      props: { post } as unknown as Post,
    };
  });
}
const { slug } = Astro.params;
const { post } = Astro.props;

---
    <PostLayout>
      <h1 class="text-6xl sm:text-8xl main-heading py-2">{post.title}</h1>
      <div class="dark:text-white" set:html={post.content}></div>
    </PostLayout>
  

